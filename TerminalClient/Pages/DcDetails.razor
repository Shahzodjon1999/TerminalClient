@page "/dcdetails"

@using Terminal.Shared.Response.DcResponse;

@inject HttpClient httpClient;

<PageTitle>Dc Operations</PageTitle>

<h3>DcDetails</h3>


@if (dcResponses.DcEnumramles == null)
{
    <p><em>Loading...</em></p>
    <p><em>Dosen't cconnect to Server...</em></p>
}
else
{
    <table class="table table-striped align-middle table-bordered">
        <thead class="table-success">
            <tr>
                <th>Счёт Дебит</th>
                <th>Счёт Кредит</th>
                <th>Сумма</th>
                <th>ID Транзакции</th>
                <th>Назначение</th>
                <th>Дата операции</th>
                <th>Операции</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in dcResponses.DcEnumramles)
            {
                <tr>
                    <td>@user.Account_db</td>
                    <td>@user.Account_cr</td>
                    <td>@user.Amount</td>
                    <td>@user.DcTransferId</td>
                    <td>@user.AboutPay</td>
                    <td>@user.DateCreated</td>
                    <td>
                        <a href='/user/edit/@user.Id' class="btn btn-outline-dark" role="button">
                            Again Pay
                        </a>
                    </td>
                </tr>
            }
        </tbody>

    </table>
}
@code {
    private DcResponses? dcResponses;

    protected override async Task OnInitializedAsync()
    {
        dcResponses = await httpClient.GetFromJsonAsync<DcResponses>($"api/Dc/GetAll");
        await base.OnInitializedAsync();
    }
}
